{"file":"index-D-SR6kuM.js","mappings":"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","names":["_ssrRenderAttrs","_mergeProps","_push","_parent","_ssrRenderComponent","_unref","_createVNode","project","_ssrRenderList","_ssrInterpolate","_ssrIncludeBooleanAttr"],"sources":["../../../../pages/projects/index.vue"],"sourcesContent":["<template>\r\n  <div class=\"space-y-6\">\r\n    <!-- Header -->\r\n    <div class=\"flex justify-between items-center\">\r\n      <div>\r\n        <h1 class=\"text-2xl font-bold text-gray-900 dark:text-white\">專案管理</h1>\r\n        <p class=\"text-gray-600 dark:text-gray-300\">管理所有專案資訊</p>\r\n      </div>\r\n      <NuxtLink\r\n        to=\"/projects/create\"\r\n        class=\"inline-flex items-center px-4 py-2 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-primary-600 hover:bg-primary-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-500\"\r\n      >\r\n        <PlusIcon class=\"w-4 h-4 mr-2\" />\r\n        新增專案\r\n      </NuxtLink>\r\n    </div>\r\n\r\n    <!-- Filter and Search -->\r\n    <div class=\"bg-white dark:bg-gray-800 rounded-lg-custom shadow-sm p-6\">\r\n      <div class=\"grid grid-cols-1 md:grid-cols-4 gap-4\">\r\n        <div>\r\n          <label class=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2\">搜尋專案</label>\r\n          <input\r\n            v-model=\"searchQuery\"\r\n            type=\"text\"\r\n            placeholder=\"搜尋專案名稱...\"\r\n            class=\"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:outline-none focus:ring-primary-500 focus:border-primary-500 dark:bg-gray-700 dark:text-white\"\r\n          />\r\n        </div>\r\n        <div>\r\n          <label class=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2\">專案類別</label>\r\n          <select\r\n            v-model=\"filterCategory\"\r\n            class=\"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:outline-none focus:ring-primary-500 focus:border-primary-500 dark:bg-gray-700 dark:text-white\"\r\n          >\r\n            <option value=\"\">全部類別</option>\r\n            <option value=\"website\">網站</option>\r\n            <option value=\"script\">腳本</option>\r\n            <option value=\"server\">伺服器</option>\r\n            <option value=\"custom\">自訂</option>\r\n          </select>\r\n        </div>\r\n        <div>\r\n          <label class=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2\">專案狀態</label>\r\n          <select\r\n            v-model=\"filterStatus\"\r\n            class=\"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:outline-none focus:ring-primary-500 focus:border-primary-500 dark:bg-gray-700 dark:text-white\"\r\n          >\r\n            <option value=\"\">全部狀態</option>\r\n            <option value=\"contacted\">已接洽</option>\r\n            <option value=\"in_progress\">進行中</option>\r\n            <option value=\"completed\">已完成</option>\r\n            <option value=\"paid\">已收款</option>\r\n          </select>\r\n        </div>\r\n        <div class=\"flex items-end\">\r\n          <button\r\n            @click=\"clearFilters\"\r\n            class=\"w-full px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm text-sm font-medium text-gray-700 dark:text-gray-300 bg-white dark:bg-gray-700 hover:bg-gray-50 dark:hover:bg-gray-600 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-500\"\r\n          >\r\n            清除篩選\r\n          </button>\r\n        </div>\r\n      </div>\r\n    </div>\r\n\r\n    <!-- Projects Table -->\r\n    <div class=\"bg-white dark:bg-gray-800 rounded-lg-custom shadow-sm overflow-hidden\">\r\n      <div class=\"overflow-x-auto\">\r\n        <table class=\"min-w-full divide-y divide-gray-200 dark:divide-gray-700\">\r\n          <thead class=\"bg-gray-50 dark:bg-gray-900\">\r\n            <tr>\r\n              <th class=\"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider\">\r\n                專案名稱\r\n              </th>\r\n              <th class=\"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider\">\r\n                業主\r\n              </th>\r\n              <th class=\"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider\">\r\n                類別\r\n              </th>\r\n              <th class=\"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider\">\r\n                金額\r\n              </th>\r\n              <th class=\"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider\">\r\n                狀態\r\n              </th>\r\n              <th class=\"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider\">\r\n                接洽日期\r\n              </th>\r\n              <th class=\"px-6 py-3 text-right text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider\">\r\n                操作\r\n              </th>\r\n            </tr>\r\n          </thead>\r\n          <tbody class=\"bg-white dark:bg-gray-800 divide-y divide-gray-200 dark:divide-gray-700\">\r\n            <tr\r\n              v-for=\"project in filteredProjects\"\r\n              :key=\"project?.id || 'empty'\"\r\n              class=\"hover:bg-gray-50 dark:hover:bg-gray-700\"\r\n              v-if=\"project\"\r\n            >\r\n              <td class=\"px-6 py-4 whitespace-nowrap\">\r\n                <div>\r\n                  <div class=\"text-sm font-medium text-gray-900 dark:text-white\">\r\n                    {{ project?.name || '未知專案' }}\r\n                  </div>\r\n                  <div class=\"text-sm text-gray-500 dark:text-gray-400\">\r\n                    {{ project?.description || '無描述' }}\r\n                  </div>\r\n                </div>\r\n              </td>\r\n              <td class=\"px-6 py-4 whitespace-nowrap text-sm text-gray-900 dark:text-white\">\r\n                {{ project?.client || '未知業主' }}\r\n              </td>\r\n              <td class=\"px-6 py-4 whitespace-nowrap\">\r\n                <span class=\"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium\"\r\n                  :class=\"getCategoryClass(project?.category)\"\r\n                >\r\n                  {{ getCategoryLabel(project?.category) }}\r\n                </span>\r\n              </td>\r\n              <td class=\"px-6 py-4 whitespace-nowrap text-sm text-gray-900 dark:text-white\">\r\n                NT${{ (project?.amount || 0).toLocaleString() }}\r\n              </td>\r\n              <td class=\"px-6 py-4 whitespace-nowrap\">\r\n                <span class=\"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium\"\r\n                  :class=\"getStatusClass(project?.status)\"\r\n                >\r\n                  {{ getStatusLabel(project?.status) }}\r\n                </span>\r\n              </td>\r\n              <td class=\"px-6 py-4 whitespace-nowrap text-sm text-gray-500 dark:text-gray-400\">\r\n                {{ formatDate(project?.contact_date) }}\r\n              </td>\r\n              <td class=\"px-6 py-4 whitespace-nowrap text-right text-sm font-medium\">\r\n                <div class=\"flex justify-end space-x-2\">\r\n                  <button class=\"text-indigo-600 hover:text-indigo-900 dark:text-indigo-400\">\r\n                    <PencilIcon class=\"w-4 h-4\" />\r\n                  </button>\r\n                  <button @click=\"handleDeleteProject(project?.id)\" class=\"text-red-600 hover:text-red-900 dark:text-red-400\" :disabled=\"!project?.id\">\r\n                    <TrashIcon class=\"w-4 h-4\" />\r\n                  </button>\r\n                </div>\r\n              </td>\r\n            </tr>\r\n          </tbody>\r\n        </table>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script setup>\r\n// Page metadata\r\ndefinePageMeta({\r\n  middleware: 'auth'\r\n})\r\nimport { PlusIcon, PencilIcon, TrashIcon } from '@heroicons/vue/24/outline'\r\n\r\nconst { getProjects, deleteProject } = useProjects()\r\n\r\n// Reactive data\r\nconst projects = ref([])\r\nconst searchQuery = ref('')\r\nconst filterCategory = ref('')\r\nconst filterStatus = ref('')\r\nconst loading = ref(false)\r\nconst error = ref(null)\r\n\r\n// Computed properties\r\nconst filteredProjects = computed(() => {\r\n  return projects.value.filter(project => {\r\n    const matchesSearch = project.name.toLowerCase().includes(searchQuery.value.toLowerCase()) ||\r\n                         project.description.toLowerCase().includes(searchQuery.value.toLowerCase())\r\n    const matchesCategory = !filterCategory.value || project.category === filterCategory.value\r\n    const matchesStatus = !filterStatus.value || project.status === filterStatus.value\r\n    \r\n    return matchesSearch && matchesCategory && matchesStatus\r\n  })\r\n})\r\n\r\n// Methods\r\nconst loadProjects = async () => {\r\n  loading.value = true\r\n  error.value = null\r\n  \r\n  const response = await getProjects({\r\n    search: searchQuery.value,\r\n    category: filterCategory.value,\r\n    status: filterStatus.value\r\n  })\r\n  \r\n  if (response.success) {\r\n    projects.value = response.data.data || response.data || []\r\n  } else {\r\n    error.value = response.error?.message || '載入專案資料失敗'\r\n    // Fallback to mock data for development\r\n    projects.value = [\r\n      {\r\n        id: 1,\r\n        name: 'ABC公司官網',\r\n        description: '企業形象網站建置',\r\n        client: 'ABC公司',\r\n        category: 'website',\r\n        amount: 50000,\r\n        status: 'completed',\r\n        contact_date: '2024-01-15'\r\n      },\r\n      {\r\n        id: 2,\r\n        name: '自動化備份腳本',\r\n        description: '伺服器備份自動化',\r\n        client: 'XYZ企業',\r\n        category: 'script',\r\n        amount: 15000,\r\n        status: 'in_progress',\r\n        contact_date: '2024-01-20'\r\n      },\r\n      {\r\n        id: 3,\r\n        name: '伺服器維護',\r\n        description: '定期系統維護',\r\n        client: '123公司',\r\n        category: 'server',\r\n        amount: 30000,\r\n        status: 'paid',\r\n        contact_date: '2024-01-10'\r\n      }\r\n    ]\r\n  }\r\n  \r\n  loading.value = false\r\n}\r\n\r\nconst clearFilters = () => {\r\n  searchQuery.value = ''\r\n  filterCategory.value = ''\r\n  filterStatus.value = ''\r\n  loadProjects()\r\n}\r\n\r\nconst handleDeleteProject = async (projectId) => {\r\n  if (!confirm('確定要刪除此專案嗎？')) return\r\n  \r\n  const response = await deleteProject(projectId)\r\n  \r\n  if (response.success) {\r\n    // Remove from local array\r\n    projects.value = projects.value.filter(project => project.id !== projectId)\r\n  } else {\r\n    alert(response.error?.message || '刪除失敗')\r\n  }\r\n}\r\n\r\nconst getCategoryLabel = (category) => {\r\n  const labels = {\r\n    website: '網站',\r\n    script: '腳本',\r\n    server: '伺服器',\r\n    custom: '自訂'\r\n  }\r\n  return labels[category] || category\r\n}\r\n\r\nconst getCategoryClass = (category) => {\r\n  const classes = {\r\n    website: 'bg-blue-100 text-blue-800 dark:bg-blue-900 dark:text-blue-200',\r\n    script: 'bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-200',\r\n    server: 'bg-yellow-100 text-yellow-800 dark:bg-yellow-900 dark:text-yellow-200',\r\n    custom: 'bg-purple-100 text-purple-800 dark:bg-purple-900 dark:text-purple-200'\r\n  }\r\n  return classes[category] || 'bg-gray-100 text-gray-800 dark:bg-gray-900 dark:text-gray-200'\r\n}\r\n\r\nconst getStatusLabel = (status) => {\r\n  const labels = {\r\n    contacted: '已接洽',\r\n    in_progress: '進行中',\r\n    completed: '已完成',\r\n    paid: '已收款'\r\n  }\r\n  return labels[status] || status\r\n}\r\n\r\nconst getStatusClass = (status) => {\r\n  const classes = {\r\n    contacted: 'bg-gray-100 text-gray-800 dark:bg-gray-900 dark:text-gray-200',\r\n    in_progress: 'bg-blue-100 text-blue-800 dark:bg-blue-900 dark:text-blue-200',\r\n    completed: 'bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-200',\r\n    paid: 'bg-emerald-100 text-emerald-800 dark:bg-emerald-900 dark:text-emerald-200'\r\n  }\r\n  return classes[status] || 'bg-gray-100 text-gray-800 dark:bg-gray-900 dark:text-gray-200'\r\n}\r\n\r\nconst formatDate = (dateString) => {\r\n  if (!dateString) return '未設定'\r\n  return new Date(dateString).toLocaleDateString('zh-TW')\r\n}\r\n\r\n// Load data on mount\r\nonMounted(() => {\r\n  // Check for search parameter from URL (e.g., from 404 page)\r\n  const route = useRoute()\r\n  if (route.query.q) {\r\n    searchQuery.value = route.query.q\r\n  }\r\n  \r\n  loadProjects()\r\n})\r\n\r\n// Watch filters for real-time filtering\r\nwatch([searchQuery, filterCategory, filterStatus], () => {\r\n  // Debounce API calls if needed\r\n  // For now, just filter locally\r\n})\r\n</script>"],"version":3}