{"file":"index-_orNPGQA.js","mappings":";;;;;;;;;;;;;;;;;;;;;;;AAgFmD,iBAAY;AAG/C,QAAI,IAAI;AACV,QAAI,IAAI;AACtB,UAAM,gBAAgB,IAAI,EAAE;AAC5B,UAAM,aAAa,IAAI,EAAE;AAGzB,UAAM,QAAQ,SAAS,MAAM;AAAA,MAC3B;AAAA,QACE,MAAM;AAAA,QACN,OAAO,cAAc,MAAM,kBAAkB;AAAA,QAC7C,MAAM;AAAA,MACV;AAAA,MACE;AAAA,QACE,MAAM;AAAA,QACN,OAAO,OAAO,cAAc,MAAM,iBAAiB,GAAG,eAAc,CAAE;AAAA,QACtE,MAAM;AAAA,MACV;AAAA,MACE;AAAA,QACE,MAAM;AAAA,QACN,OAAO,cAAc,MAAM,wBAAwB;AAAA,QACnD,MAAM;AAAA,MACV;AAAA,MACE;AAAA,QACE,MAAM;AAAA,QACN,OAAO,cAAc,MAAM,iBAAiB;AAAA,QAC5C,MAAM;AAAA,MACV;AAAA,IACA,CAAC;AA2CD,UAAM,iBAAiB;AAAA,MACrB;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,IACF;AAEA,UAAM,UAAU,CAAC,aAAa;AAC5B,aAAO,eAAe,QAAQ,KAAK;AAAA,IACrC;;AAlKO,YAAA,OAAAA,eAAAC,WAAA,EAAA,OAAM,eAAW,MAAA,CAAA,CAAA,qTAAA;AAcDC,oBAAAC,MAAA,KAAA,IAAR,SAAI;;AAMSC,uBAAA,OAAAC,YAAAC,wBAAA,QAAQ,KAAK,IAAI,CAAA,GAAA,EAAG,OAAM,iDAAgD,GAAA,IAAA,GAAA,OAAA;yGAGvBC,eAAA,KAAK,IAAI,oEACbA,eAAA,KAAK,KAAK;;;UA4BnEC,KAAAA,UAAQ;;AAHKN,sBAAAC,MAAA,UAAA,IAAZ,aAAQ;4LAOuCI,gBAAA,qCAAU,gBAAW,KAAA,4DAClBA,gBAAA,qCAAU,SAAI,MAAA;;;;;;;;;;;;;;;;","names":["_ssrRenderAttrs","_mergeProps","_ssrRenderList","_unref","_ssrRenderVNode","_createVNode","_resolveDynamicComponent","_ssrInterpolate","activity"],"sources":["../../../../pages/index.vue"],"sourcesContent":["<template>\r\n  <div class=\"space-y-6\">\r\n    <!-- Welcome Section -->\r\n    <div class=\"bg-white dark:bg-gray-800 rounded-lg-custom shadow-sm p-6\">\r\n      <h2 class=\"text-2xl font-bold text-gray-900 dark:text-white mb-4\">\r\n        專案管理儀表板\r\n      </h2>\r\n      <p class=\"text-gray-600 dark:text-gray-300\">\r\n        管理您的專案、業主資訊，並追蹤專案進度和收入統計。\r\n      </p>\r\n    </div>\r\n\r\n    <!-- Stats Grid -->\r\n    <div class=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6\">\r\n      <div\r\n        v-for=\"stat in stats\"\r\n        :key=\"stat.name\"\r\n        class=\"bg-white dark:bg-gray-800 rounded-lg-custom shadow-sm p-6\"\r\n      >\r\n        <div class=\"flex items-center\">\r\n          <div class=\"p-3 rounded-lg bg-primary-100 dark:bg-primary-900\">\r\n            <component :is=\"getIcon(stat.icon)\" class=\"w-6 h-6 text-primary-600 dark:text-primary-400\" />\r\n          </div>\r\n          <div class=\"ml-4\">\r\n            <p class=\"text-sm font-medium text-gray-600 dark:text-gray-400\">{{ stat.name }}</p>\r\n            <p class=\"text-2xl font-bold text-gray-900 dark:text-white\">{{ stat.value }}</p>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n\r\n    <!-- Recent Activity -->\r\n    <div class=\"grid grid-cols-1 lg:grid-cols-2 gap-6\">\r\n      <!-- Chart Section -->\r\n      <div class=\"bg-white dark:bg-gray-800 rounded-lg-custom shadow-sm p-6\">\r\n        <h3 class=\"text-lg font-semibold text-gray-900 dark:text-white mb-4\">\r\n          收入趨勢\r\n        </h3>\r\n        <div class=\"h-64 bg-gray-100 dark:bg-gray-700 rounded-lg flex items-center justify-center\">\r\n          <p class=\"text-gray-500 dark:text-gray-400\">月收入趨勢圖表 (待實作)</p>\r\n        </div>\r\n      </div>\r\n\r\n      <!-- Activity Feed -->\r\n      <div class=\"bg-white dark:bg-gray-800 rounded-lg-custom shadow-sm p-6\">\r\n        <h3 class=\"text-lg font-semibold text-gray-900 dark:text-white mb-4\">\r\n          專案動態\r\n        </h3>\r\n        <div class=\"space-y-4\">\r\n          <div\r\n            v-for=\"activity in activities\"\r\n            :key=\"activity?.id || 'empty'\"\r\n            class=\"flex items-start space-x-3\"\r\n            v-if=\"activity\"\r\n          >\r\n            <div class=\"w-2 h-2 mt-2 bg-primary-500 rounded-full\"></div>\r\n            <div class=\"flex-1\">\r\n              <p class=\"text-sm text-gray-900 dark:text-white\">{{ activity?.description || '無描述' }}</p>\r\n              <p class=\"text-xs text-gray-500 dark:text-gray-400\">{{ activity?.time || '未知時間' }}</p>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script setup>\r\n// Page metadata\r\ndefinePageMeta({\r\n  middleware: 'auth'\r\n})\r\nimport {\r\n  UsersIcon,\r\n  CurrencyDollarIcon,\r\n  ChartBarIcon,\r\n  ClockIcon,\r\n  FolderIcon\r\n} from '@heroicons/vue/24/outline'\r\n\r\nconst { getDashboardStats, getRecentActivities } = useDashboard()\r\n\r\n// Reactive data\r\nconst loading = ref(true)\r\nconst error = ref(null)\r\nconst dashboardData = ref({})\r\nconst activities = ref([])\r\n\r\n// Computed stats\r\nconst stats = computed(() => [\r\n  { \r\n    name: '總專案數', \r\n    value: dashboardData.value.total_projects || 0, \r\n    icon: 'FolderIcon' \r\n  },\r\n  { \r\n    name: '總收入', \r\n    value: `NT$${(dashboardData.value.total_revenue || 0).toLocaleString()}`, \r\n    icon: 'CurrencyDollarIcon' \r\n  },\r\n  { \r\n    name: '進行中專案', \r\n    value: dashboardData.value.in_progress_projects || 0, \r\n    icon: 'ClockIcon' \r\n  },\r\n  { \r\n    name: '活躍業主', \r\n    value: dashboardData.value.total_clients || 0, \r\n    icon: 'UsersIcon' \r\n  }\r\n])\r\n\r\n// Methods\r\nconst loadDashboardData = async () => {\r\n  loading.value = true\r\n  error.value = null\r\n\r\n  try {\r\n    // Load dashboard stats\r\n    const statsResponse = await getDashboardStats()\r\n    if (statsResponse.success) {\r\n      dashboardData.value = statsResponse.data\r\n    } else {\r\n      // Fallback to mock data for development\r\n      dashboardData.value = {\r\n        total_projects: 15,\r\n        total_revenue: 150000,\r\n        in_progress_projects: 3,\r\n        total_clients: 8\r\n      }\r\n    }\r\n\r\n    // Load recent activities\r\n    const activitiesResponse = await getRecentActivities(4)\r\n    if (activitiesResponse.success) {\r\n      activities.value = activitiesResponse.data\r\n    } else {\r\n      // Fallback to mock data for development\r\n      activities.value = [\r\n        { id: 1, description: '完成「ABC公司網站」專案', time: '2小時前' },\r\n        { id: 2, description: '新增業主「XYZ企業」', time: '1天前' },\r\n        { id: 3, description: '收到「伺服器維護」專案款項', time: '2天前' },\r\n        { id: 4, description: '開始執行「自動化腳本」專案', time: '3天前' }\r\n      ]\r\n    }\r\n  } catch (err) {\r\n    error.value = err.message || '載入數據失敗'\r\n    console.error('Dashboard loading error:', err)\r\n  } finally {\r\n    loading.value = false\r\n  }\r\n}\r\n\r\nconst iconComponents = {\r\n  UsersIcon,\r\n  CurrencyDollarIcon,\r\n  ChartBarIcon,\r\n  ClockIcon,\r\n  FolderIcon\r\n}\r\n\r\nconst getIcon = (iconName) => {\r\n  return iconComponents[iconName] || ChartBarIcon\r\n}\r\n\r\n// Load data on mount\r\nonMounted(() => {\r\n  loadDashboardData()\r\n})\r\n</script>"],"version":3}