import{u as w,r as C}from"./C5J7RP-m.js";import{c as n,o,a as e,r as d,b as D,d as I,F as m,e as p,u as x,f as j,g as B,h as $,t as l,i as F,j as h,k as N}from"./BxfpjSiT.js";function R(_,i){return o(),n("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M12 6v6h4.5m4.5 0a9 9 0 1 1-18 0 9 9 0 0 1 18 0Z"})])}const S={class:"space-y-6"},A={class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6"},L={class:"flex items-center"},M={class:"p-3 rounded-lg bg-primary-100 dark:bg-primary-900"},U={class:"ml-4"},V={class:"text-sm font-medium text-gray-600 dark:text-gray-400"},Z={class:"text-2xl font-bold text-gray-900 dark:text-white"},E={class:"grid grid-cols-1 lg:grid-cols-2 gap-6"},T={class:"bg-white dark:bg-gray-800 rounded-lg-custom shadow-sm p-6"},X={class:"space-y-4"},Y={class:"flex-1"},q={class:"text-sm text-gray-900 dark:text-white"},z={class:"text-xs text-gray-500 dark:text-gray-400"},J={__name:"index",setup(_){const{getDashboardStats:i,getRecentActivities:k}=w(),g=d(!0),u=d(null),a=d({}),c=d([]),v=D(()=>[{name:"總專案數",value:a.value.total_projects||0,icon:"FolderIcon"},{name:"總收入",value:`NT$${(a.value.total_revenue||0).toLocaleString()}`,icon:"CurrencyDollarIcon"},{name:"進行中專案",value:a.value.in_progress_projects||0,icon:"ClockIcon"},{name:"活躍業主",value:a.value.total_clients||0,icon:"UsersIcon"}]),b=async()=>{g.value=!0,u.value=null;try{const r=await i();r.success?a.value=r.data:a.value={total_projects:15,total_revenue:15e4,in_progress_projects:3,total_clients:8};const t=await k(4);t.success?c.value=t.data:c.value=[{id:1,description:"完成「ABC公司網站」專案",time:"2小時前"},{id:2,description:"新增業主「XYZ企業」",time:"1天前"},{id:3,description:"收到「伺服器維護」專案款項",time:"2天前"},{id:4,description:"開始執行「自動化腳本」專案",time:"3天前"}]}catch(r){u.value=r.message||"載入數據失敗",console.error("Dashboard loading error:",r)}finally{g.value=!1}},y={UsersIcon:N,CurrencyDollarIcon:C,ChartBarIcon:h,ClockIcon:R,FolderIcon:F},f=r=>y[r]||h;return I(()=>{b()}),(r,t)=>(o(),n("div",S,[t[3]||(t[3]=e("div",{class:"bg-white dark:bg-gray-800 rounded-lg-custom shadow-sm p-6"},[e("h2",{class:"text-2xl font-bold text-gray-900 dark:text-white mb-4"}," 專案管理儀表板 "),e("p",{class:"text-gray-600 dark:text-gray-300"}," 管理您的專案、業主資訊，並追蹤專案進度和收入統計。 ")],-1)),e("div",A,[(o(!0),n(m,null,p(x(v),s=>(o(),n("div",{key:s.name,class:"bg-white dark:bg-gray-800 rounded-lg-custom shadow-sm p-6"},[e("div",L,[e("div",M,[(o(),B($(f(s.icon)),{class:"w-6 h-6 text-primary-600 dark:text-primary-400"}))]),e("div",U,[e("p",V,l(s.name),1),e("p",Z,l(s.value),1)])])]))),128))]),e("div",E,[t[2]||(t[2]=e("div",{class:"bg-white dark:bg-gray-800 rounded-lg-custom shadow-sm p-6"},[e("h3",{class:"text-lg font-semibold text-gray-900 dark:text-white mb-4"}," 收入趨勢 "),e("div",{class:"h-64 bg-gray-100 dark:bg-gray-700 rounded-lg flex items-center justify-center"},[e("p",{class:"text-gray-500 dark:text-gray-400"},"月收入趨勢圖表 (待實作)")])],-1)),e("div",T,[t[1]||(t[1]=e("h3",{class:"text-lg font-semibold text-gray-900 dark:text-white mb-4"}," 專案動態 ",-1)),e("div",X,[r.activity?(o(!0),n(m,{key:0},p(x(c),s=>(o(),n("div",{key:(s==null?void 0:s.id)||"empty",class:"flex items-start space-x-3"},[t[0]||(t[0]=e("div",{class:"w-2 h-2 mt-2 bg-primary-500 rounded-full"},null,-1)),e("div",Y,[e("p",q,l((s==null?void 0:s.description)||"無描述"),1),e("p",z,l((s==null?void 0:s.time)||"未知時間"),1)])]))),128)):j("",!0)])])])]))}};export{J as default};
